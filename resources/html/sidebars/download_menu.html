<div id=dlsdsl data-selected='null'>
	<script>
		var elm = document.getElementById("dlsdsl");
		function loadResults(id, mv){
			var list = document.getElementById("dllist");
			list.innerHTML = "Loading...";
			post("/download?rq=downloads&id=" + id + (mv == 'all' ? "" : "&mv=" + mv), function(text){
				list.innerHTML = "";
				if(text == 'null'){
					list.innerHTML = "ERROR WHILE FETCHING DATA";
					return;
				}
				var arr = JSON.parse(text);
				if(arr.length == 0){
					list.innerHTML = "No Results found";
				}
				else{
					var str = "<table><tr><th>Host Version</th><th>Version</th><th>Download</th><th>Mirror 2</th><th>Mirror 3</th><tr>";
					for(var i = 0; i < arr.length; i++){
						var obj = arr[i];
						str += "<tr><td>" + obj.mc_version + "</td><td>" + obj.version + "</td><td onClick=\"location.href='" + obj.mirror1_link + "'\">" + obj.mirror1_name + "</td><td onClick=\"location.href='" + obj.mirror2_link + "'\">" + obj.mirror2_name + "</td><td onClick=\"location.href='" + obj.mirror3_link + "'\">" + obj.mirror3_name + "</td></tr>";
					}
					list.innerHTML += str + "</table>";
				}
			});
		}
		if(elm.dataset.selected != 'null'){
			loadResults(elm.dataset.selected, "all");
		}
		post("/download?rq=ids", function(text){
			var arr = JSON.parse(text);
			var options = "";
			if(arr.lenght == 0){
				options = "<option value='none'>ERROR</option>";
			}
			else{
				for(var i = 0; i < arr.length; i++){
					options += "<option value='" + arr[i] + "'>" + arr[i] + "</option>";
				}
			}
			elm.innerHTML += "<select id=dlsdid>" + options + "</select>";
		});
		post("/download?rq=versions", function(text){
			var arr = JSON.parse(text);
			var options = "<option value='all'>All Minecraft Versions</option>";
			if(arr.lenght == 0){
				options = "<option value='1.0'>ERR 1.0</option>";
			}
			else{
				for(var i = 0; i < arr.length; i++){
					options += "<option value='" + arr[i] + "'>Minecraft " + arr[i] + "</option>";
				}
			}
			elm.innerHTML += "<select id=dlsdvs>" + options + "</select>";
		});
	</script>
</div>
<div class=sidebar_button onClick='loadResults(document.getElementById("dlsdid").value, document.getElementById("dlsdvs").value);'>Filter</div>